
var wlClient;(function(wlClient){var WLEditor=(function(){function WLEditor(){this.clientWindow=null;this.clientInstance=null;this.resizeHandler=null;this.tabsHandler=null;this.gmcpHandler=null;this.filetreeHandler=null;}
WLEditor.prototype.updateClient=function(clientWin,clientInst){this.clientWindow=clientWin;this.clientInstance=clientInst;};WLEditor.prototype.isClientConnected=function(){return this.clientWindow&&this.clientInstance&&this.clientInstance.getSocket().connected;};WLEditor.prototype.getClientSocket=function(){if(this.clientWindow&&this.clientInstance)
return this.clientInstance.getSocket();else
return null;};WLEditor.prototype.isClientWindowClosed=function(){return!this.clientWindow||this.clientWindow.closed;};WLEditor.prototype.focusClientWindow=function(){if(!this.isClientWindowClosed())
this.clientWindow.focus();};WLEditor.prototype.handle_storage=function(event){console.log("STORAGE EVENT: "+event.key);if(/^WL\.File\.List list/.test(event.key))
this.filetreeHandler.refreshFiletree();if(/^WL\.File\.Transfer path/.test(event.key))
this.tabsHandler.refreshEditpart();};;WLEditor.prototype.startEditor=function(){this.resizeHandler=new wlClient.WLEditorResizeHandler();this.filetreeHandler=new wlClient.WLEditorFiletreeHandler();this.tabsHandler=new wlClient.WLEditorTabsHandler();this.gmcpHandler=new wlClient.WLEditorGMCPHandler();this.resizeHandler.initialize();this.gmcpHandler.initialize(this);this.tabsHandler.initialize(this,this.gmcpHandler);this.tabsHandler.refreshEditpart();window.addEventListener('storage',this.handle_storage,false);};WLEditor.prototype.logMessage=function(msg){document.getElementById('messages').append("<span style=\"display: block;\">"+new Date().toJSON()+": "+msg+"</span>");document.getElementById('messages').scrollTop=document.getElementById('messages').scrollHeight;};return WLEditor;}());wlClient.WLEditor=WLEditor;})(wlClient||(wlClient={}));var wlClient;(function(wlClient){var WLEditorFiletreeHandler=(function(){function WLEditorFiletreeHandler(){this.micromodal=null;this.wlEditor=null;this.gmcpHandler=null;this.currentPath='';this.selectedEntry='';}
WLEditorFiletreeHandler.prototype.initialize=function(editor,gmcpHandler){this.wlEditor=editor;this.gmcpHandler=gmcpHandler;if(this.micromodal==null){this.micromodal=require('micromodal');this.micromodal.init();}};WLEditorFiletreeHandler.prototype.refreshFiletree=function(){};return WLEditorFiletreeHandler;}());wlClient.WLEditorFiletreeHandler=WLEditorFiletreeHandler;})(wlClient||(wlClient={}));var wlClient;(function(wlClient){var IAC='\xff';var SB='\xfa';var SE='\xf0';var TELOPT_GMCP='\xc9';var WLEditorGMCPHandler=(function(){function WLEditorGMCPHandler(){this.micromodal=null;this.wlEditor=null;this.connectionStatusTimer=null;}
WLEditorGMCPHandler.prototype.initialize=function(editor){this.wlEditor=editor;if(this.micromodal==null){this.micromodal=require('micromodal');this.micromodal.init();}
this.connectionStatusTimer=setInterval(function(){if(!this.wlEditor||!this.wlEditor.isClientConnected()){document.getElementById('connectionStatus').title="Getrennt. Bitte neu einloggen!";document.getElementById('connectionStatus').textContent="Offline";}
else{document.getElementById('connectionStatus').title="Verbunden mit "+this.clientWindow.location;document.getElementById('connectionStatus').textContent="Online";}},1000);};WLEditorGMCPHandler.prototype.tryBringClientToFront=function(){if(this.wlEditor.isClientWindowClosed()){var windowHandle=window.open("https://wl.mud.de/client/");windowHandle.focus();}
else{this.wlEditor.focusClientWindow();}};WLEditorGMCPHandler.prototype.SendGMCP_WL_File_List=function(path){if(this.wlEditor&&this.wlEditor.isClientConnected()){var msg='WL.File.List { \"path\":'+JSON.stringify(path)+' }';this.wlEditor.getClientSocket().emit('stream',IAC+SB+TELOPT_GMCP+msg+IAC+SE);}
else{document.getElementById('infoModalDlg-title').innerHTML='Verbindungsfehler!';document.getElementById('infoModalDlg-content').innerHTML='Es besteht momentan keine Verbindung zum MUD, melde Dich erst wieder an!';this.micromodal.show('infoModalDlg');}};WLEditorGMCPHandler.prototype.SendGMCP_WL_File_Transfer=function(path,content){if(this.wlEditor&&this.wlEditor.isClientConnected()){if(!content){var msg='WL.File.Transfer { \"path\":'+JSON.stringify(path)+' }';this.wlEditor.getClientSocket().emit('stream',IAC+SB+TELOPT_GMCP+msg+IAC+SE);}
else if(content.length<2000){var msg='WL.File.Transfer {\"path\":'+JSON.stringify(path)+',\"offset\":0,\"content\":'+
JSON.stringify(content)+',\"eof\":1}';this.wlEditor.getClientSocket().emit('stream',IAC+SB+TELOPT_GMCP+msg+IAC+SE);}
else{for(var i=0;i<content.length;i+=2000){var isEof=i+2000<content.length?'0':'1';var msg='WL.File.Transfer {\"path\":'+JSON.stringify(path)+',\"offset\":'+JSON.stringify(i)+',\"content\":'+JSON.stringify(content.substring(i,i+2000))+',\"eof\":'+isEof+'}';this.wlEditor.getClientSocket().emit('stream',IAC+SB+TELOPT_GMCP+msg+IAC+SE);}}}
else{document.getElementById('infoModalDlg-title').innerHTML='Verbindungsfehler!';document.getElementById('infoModalDlg-content').innerHTML='Es besteht momentan keine Verbindung zum MUD, melde Dich erst wieder an!';this.micromodal.show('infoModalDlg');}};return WLEditorGMCPHandler;}());wlClient.WLEditorGMCPHandler=WLEditorGMCPHandler;})(wlClient||(wlClient={}));var wlClient;(function(wlClient){var WLEditorResizeHandler=(function(){function WLEditorResizeHandler(){}
WLEditorResizeHandler.prototype.initialize=function(){var resizable=function(resizer){var direction=resizer.getAttribute('data-direction')||'horizontal';var prevSibling=resizer.previousElementSibling;var nextSibling=resizer.nextElementSibling;var x=0;var y=0;var prevSiblingHeight=0;var prevSiblingWidth=0;var nextSiblingHeight=0;var nextSiblingWidth=0;var mouseDownHandler=function(e){x=e.clientX;y=e.clientY;var rect1=prevSibling.getBoundingClientRect();prevSiblingHeight=rect1.height;prevSiblingWidth=rect1.width;var rect2=prevSibling.getBoundingClientRect();nextSiblingHeight=rect2.height;nextSiblingWidth=rect2.width;document.addEventListener('mousemove',mouseMoveHandler);document.addEventListener('mouseup',mouseUpHandler);};var mouseMoveHandler=function(e){var dx=e.clientX-x;var dy=e.clientY-y;switch(direction){case'vertical':var h=(prevSiblingHeight+dy)*100/resizer.parentNode.getBoundingClientRect().height;prevSibling.style.height=h+"%";break;case'horizontal':default:var w1=(prevSiblingWidth+dx);prevSibling.style.width=w1+"px";var w2=(nextSiblingWidth-dx);nextSibling.style.width=w2+"px";break;}
var cursor=direction==='horizontal'?'col-resize':'row-resize';resizer.style.cursor=cursor;document.body.style.cursor=cursor;prevSibling.style.userSelect='none';prevSibling.style.pointerEvents='none';nextSibling.style.userSelect='none';nextSibling.style.pointerEvents='none';};var mouseUpHandler=function(){resizer.style.removeProperty('cursor');document.body.style.removeProperty('cursor');prevSibling.style.removeProperty('user-select');prevSibling.style.removeProperty('pointer-events');nextSibling.style.removeProperty('user-select');nextSibling.style.removeProperty('pointer-events');document.removeEventListener('mousemove',mouseMoveHandler);document.removeEventListener('mouseup',mouseUpHandler);};resizer.addEventListener('mousedown',mouseDownHandler);};document.querySelectorAll('.resizer').forEach(function(ele){resizable(ele);});window.addEventListener('resize',this.adjustLayout);};WLEditorResizeHandler.prototype.adjustLayout=function(){var thePage=document.getElementById('page');var theFiletree=document.getElementById('filetree');var theTabs=document.getElementById('tabs');var theMessages=document.getElementById('messages');var pWidth=thePage.clientWidth;var tWidth=theFiletree.clientWidth;};return WLEditorResizeHandler;}());wlClient.WLEditorResizeHandler=WLEditorResizeHandler;})(wlClient||(wlClient={}));var wlClient;(function(wlClient){var WLEditorTabsHandler=(function(){function WLEditorTabsHandler(){this.micromodal=null;this.editpart_changes={};this.wlEditor=null;this.gmcpHandler=null;}
WLEditorTabsHandler.prototype.myTabClicks=function(tabClickEvent){var myTabs=document.querySelectorAll("ul.nav-tabs > li");for(var i=0;i<myTabs.length;i++){myTabs[i].classList.remove("active");}
var clickedTab=tabClickEvent.currentTarget;clickedTab.classList.add("active");tabClickEvent.preventDefault();var myContentPanes=document.querySelectorAll(".tab-pane");for(var i=0;i<myContentPanes.length;i++){myContentPanes[i].classList.remove("active");}
var anchorReference=tabClickEvent.target;var activePaneId=anchorReference.getAttribute("href");var activePane=document.querySelector(activePaneId);activePane.classList.add("active");var cm=this.getActiveTabCM();if(cm)
cm.refresh();};WLEditorTabsHandler.prototype.tabCloseIconClicked=function(){};WLEditorTabsHandler.prototype.initialize=function(editor,gmcpHandler){var _this=this;this.wlEditor=editor;this.gmcpHandler=gmcpHandler;if(this.micromodal==null){this.micromodal=require('micromodal');this.micromodal.init();}
var myTabs=document.querySelectorAll("ul.nav-tabs > li > a");for(var i=0;i<myTabs.length;i++){myTabs[i].addEventListener("click",this.myTabClicks.bind(this));}
var autosaveTimer=setInterval(function(){var activeTab=_this.getActiveTab();if(activeTab){var cm=activeTab.children[0]['CodeMirror'];if(cm&&_this.editpart_changes[activeTab.id]&&_this.editpart_changes[activeTab.id]>0){_this.wlEditor.logMessage("Autosave...");var content=cm.getDoc().getValue();var num=_this.getNumFromId(activeTab.id);localStorage.setItem('wl.editor.localFile.'+num,content);_this.editpart_changes[activeTab.id]=0;}}},30000);};WLEditorTabsHandler.prototype.getNumFromId=function(tabId){return tabId.replace(/^.*[-]/,'');};WLEditorTabsHandler.prototype.getActiveTab=function(){return document.querySelector("div.tab-content div.tab-pane.active");};WLEditorTabsHandler.prototype.getActiveTabCM=function(){var cm;var activeTab=this.getActiveTab();if(activeTab){cm=activeTab.children[0]['CodeMirror'];}
return cm;};WLEditorTabsHandler.prototype.getLocalFileList=function(){var localFileListStr=localStorage.getItem('wl.editor.localFileList');var localFileList={};if(localFileListStr){localFileList=JSON.parse(localFileListStr);}
return localFileList;};WLEditorTabsHandler.prototype.setLocalFileList=function(localFileList){localStorage.setItem('wl.editor.localFileList',JSON.stringify(localFileList));};WLEditorTabsHandler.prototype.getActiveFileNum=function(){var num;var activeTab=this.getActiveTab();if(activeTab){num=this.getNumFromId(activeTab.id);}
return num;};WLEditorTabsHandler.prototype.transferActiveTabFileToServer=function(){var activeTab=this.getActiveTab();if(activeTab){var cm=activeTab.children[0]['CodeMirror'];var content=cm.getDoc().getValue();var num=this.getNumFromId(activeTab.id);var localFileList=this.getLocalFileList();var path=localFileList[num][0];var oldMD5=localFileList[num][2];var newMD5=webtoolkit.MD5.md5(content);this.gmcpHandler.SendGMCP_WL_File_Transfer(path,content);document.getElementById('infoModalDlg-title').innerHTML='Hinweis!';document.getElementById('infoModalDlg-content').innerHTML='Datei wurde gesendet, aber keine Empfangsbestätigung empfangen! '+'Hier ist etwas noch nicht ganz fertig.<br>Oder kaputt? :-/';this.micromodal.show('infoModalDlg');}};WLEditorTabsHandler.prototype.refreshEditpart=function(){var MAX_SLOTS=5;var path=localStorage.getItem('WL.File.Transfer path');var content=localStorage.getItem('WL.File.Transfer content');var localFileList=this.getLocalFileList();if(typeof(path)==='string'&&path.length>0&&typeof(content)==='string'){var numberSlots=Object.keys(localFileList).length;var freeID=1;for(;freeID<numberSlots+1;freeID++){if(!localFileList[freeID])
break;}
if(freeID<=MAX_SLOTS){localFileList[freeID]=[path,content.length,webtoolkit.MD5.md5(content)];this.setLocalFileList(localFileList);localStorage.setItem('wl.editor.localFile.'+freeID,content);localStorage.removeItem('WL.File.Transfer path');localStorage.removeItem('WL.File.Transfer content');this.wlEditor.logMessage("New file transferred to slot "+freeID+".");}
else{localStorage.removeItem('WL.File.Transfer path');localStorage.removeItem('WL.File.Transfer content');this.wlEditor.logMessage("Can't transfer new file to free slot! (max "+MAX_SLOTS+" allowed)");document.getElementById('infoModalDlg-title').innerHTML='Zu viele offene Dateien!';document.getElementById('infoModalDlg-content').innerHTML='Es sind bereits '+MAX_SLOTS+' Dateien ge&ouml;ffnet! Du musst erst '+'eine schlie&szlig;en, bevor Du eine weitere &ouml;ffnen kannst.';this.micromodal.show('infoModalDlg');}}
var allIDs=Object.keys(localFileList);var tabToActivate=-1;for(var i=0;i<allIDs.length;i++){var tab=document.getElementById('editor-fname-'+allIDs[i]);tabToActivate=i;if(tab==null){var path_1=localFileList[allIDs[i]][0];var fname=path_1.replace(/^.*[\\\/]/,'');var fext=(path_1.match(/[^\.]+$/))[0];var content_1=localStorage.getItem('wl.editor.localFile.'+allIDs[i]);this.wlEditor.logMessage("Create new tab for: "+localFileList[allIDs[i]][0]);var tabDiv=document.createElement('div');tabDiv.id="editor-tab-"+allIDs[i];tabDiv.classList.add("tab-pane");tabDiv.style.padding="0 0 0 1px";tabDiv.style.height="height:calc(100% - 32px)";tabDiv.style.fontSize="1.1em";document.querySelector("div .tab-content").append(tabDiv);var tabLi=document.createElement('li');tabLi.className="";var tabLiA=document.createElement('a');tabLi.appendChild(tabLiA);tabLiA.addEventListener("click",this.myTabClicks.bind(this));tabLiA.href="#editor-tab-"+allIDs[i];tabLiA.appendChild(document.createTextNode(fname));tabLiA.title=path_1;var dirtySpan=document.createElement('span');tabLi.appendChild(dirtySpan);dirtySpan.title="File is modified";var iconSpan=document.createElement('span');tabLi.appendChild(iconSpan);iconSpan.classList.add("ui-icon","ui-icon-close");iconSpan.title="Close tab";document.querySelector("ul.nav.nav-tabs").appendChild(tabLi);var editMode="htmlmixed";switch(fext.toLowerCase()){case"c":editMode="text/x-csrc";break;case"h":editMode="text/x-csrc";break;case"css":editMode="text/css";break;case"html":editMode="text/html";break;case"js":editMode="text/javascript";break;case"json":editMode="text/javascript";break;case"xml":editMode="text/xml";break;default:editMode="text/x-csrc";}
var CodeMirror=require('lib/codemirror');var editor=new CodeMirror(tabDiv,{height:"100%",lineNumbers:true,autoRefresh:true,mode:editMode,matchBrackets:true,});editor.changeGeneration();editor.on("change",function(cm,change){var activeTab=this.getActiveTab();if(!this.editpart_changes[activeTab.id])
this.editpart_changes[activeTab.id]=1;else
this.editpart_changes[activeTab.id]+=1;if(cm.getDoc().isClean()){document.querySelector('ul.nav.nav-tabs > li.active > span:first-of-type').textContent="";}
else{document.querySelector('ul.nav.nav-tabs > li.active > span:first-of-type').textContent="*";}}.bind(this));editor.getDoc().setValue(content_1);setTimeout(function(){editor.refresh();},100);}}
this.refresh_edit_buttons(tabToActivate>=0);};WLEditorTabsHandler.prototype.refresh_edit_buttons=function(canEditSomething){if(canEditSomething){document.getElementById("save").disabled=false;document.getElementById("saveas").disabled=false;document.getElementById("undo").disabled=false;document.getElementById("redo").disabled=false;}
else{document.getElementById("save").disabled=true;document.getElementById("saveas").disabled=true;document.getElementById("undo").disabled=true;document.getElementById("redo").disabled=true;}};return WLEditorTabsHandler;}());wlClient.WLEditorTabsHandler=WLEditorTabsHandler;})(wlClient||(wlClient={}));var webtoolkit;(function(webtoolkit){var MD5=(function(){function MD5(){}
MD5.md5=function(str){var RotateLeft=function(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));};var AddUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4){return(lResult^0x80000000^lX8^lY8);}
if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8);}
else{return(lResult^0x40000000^lX8^lY8);}}
else{return(lResult^lX8^lY8);}};var F=function(x,y,z){return(x&y)|((~x)&z);};var G=function(x,y,z){return(x&z)|(y&(~z));};var H=function(x,y,z){return(x^y^z);};var I=function(x,y,z){return(y^(x|(~z)));};var FF=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var GG=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var HH=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var II=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var Utf8Encode=function(str){str=str.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<str.length;n++){var c=str.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;};var ConvertToWordArray=function(str){var lWordCount;var lMessageLength=str.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(str.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};var WordToHex=function(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);}
return WordToHexValue;};var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;str=Utf8Encode(str);x=ConvertToWordArray(str);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],S11,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],S11,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],S41,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],S41,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],S41,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD);}
var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase();};return MD5;}());webtoolkit.MD5=MD5;})(webtoolkit||(webtoolkit={}));